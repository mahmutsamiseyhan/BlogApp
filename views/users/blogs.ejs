<!DOCTYPE html>
<html lang="tr">
<head>
    <%- include("../partials/head") %> 
</head>
<body>
    
    <%- include("../partials/nav") %> 

    <div class="container mt-3">
        <div class="row">
            <!-- Kategori Menü Alanı -->
            <div class="col-md-3">
                <!-- Arama ve Filtreleme Formu -->
                <form action="/blogs" method="GET">
                    <input type="text" name="search" placeholder="Bloglarda ara..." value="<%= typeof query !== 'undefined' ? query : '' %>" class="form-control mb-2">
                    <select name="category" class="form-control mb-2">
                        <option value="">Tüm Kategoriler</option>
                        <% categories.forEach(category => { %>
                            <option value="<%= category._id %>" <%= typeof selectedCategory !== 'undefined' && selectedCategory.toString() === category._id.toString() ? 'selected' : '' %>><%= category.name %></option>
                        <% }) %>
                    </select>
                    <button type="submit" class="btn btn-primary">Ara</button>
                </form>

                <%- include("../partials/category-menu", { categories, selectedCategory }) %> 
            </div>

            <!-- Blog Listesi ve İçerik Alanı -->
            <div class="col-md-9">
                <h1 class="h3 mb-3"><%= title %></h1>

                <!-- Bloglar Yoksa Gösterilecek Alan -->
                <% if (blogs.length === 0) { %>
                    <%- include("../partials/no-products") %>
                <% } else { %>
                    <!-- Blog Kartları -->
                    <% blogs.forEach(blog => { %>
                        <%- include("../partials/blog-card", blog) %> 
                    <% }) %>

                    <!-- Sayfalandırma -->
                    <%- include("../partials/pagination") %> 
                <% } %>
            </div>
        </div>
    </div>
    <script>
        AOS.init({
          duration: 1200,
          easing: 'ease-in-out',
          once: true
        });
      </script>
    <script>
        const toggleButton = document.getElementById('theme-toggle');
        toggleButton.addEventListener('click', () => {
          document.body.classList.toggle('dark-mode');
        });
      </script>
      <!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
